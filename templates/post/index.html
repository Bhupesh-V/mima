{% extends 'base.html' %}

{% block header %}
<h1>
        {% block title %}
        Latest Posts
        {% endblock %}
</h1>
{% if g.user %}
<a href="{{ url_for('post.create') }}">
        <i style="font-size: 50px;" class="fa fa-plus-square-o large" aria-hidden="true"></i>
</a>
{% endif %}
{% endblock %}

{% block content %}

{% for image_post in posts %}
<article class="card" class="post">
        <header class="card-content">
                <div>
                        <h1><a href="/post/{{ image_post['id'] }}">{{ image_post['caption'] }}</a></h1>
                        <div class="about">by {{ image_post['username'] }} on {{ image_post['created'].strftime('%Y-%m-%d') }}</div>
                </div>
                {% if g.user['id'] == image_post['author_id'] %}
                <form method="post" action="{{ url_for('post.delete', id=image_post['id']) }}" >
                        <button type="submit" value="Delete" onclick="return confirm('Are you sure?');" style="border: 0; background: none; cursor:pointer;">
                                <i style="font-size: 30px; color: red;" class="fa fa-trash-o" aria-hidden="true"></i></button>
                </form>
                {% endif %}
                <span class="icon is-small is-right">
                        <p>{{ image_post['likes'] }}</p>
                </span>
                {% if g.user['id'] != image_post['author_id'] %}
                <form method="post" action="{{ url_for('post.like', id=image_post['id']) }}" >
                        <button type="submit" value="like" style="border: 0; background: none; cursor:pointer;">
                                <i style="font-size: 30px; color: red;" class="fa fa-heart" aria-hidden="true"></i></button>
                </form>
                {% endif %}
        </header>
        <p class="body">{{ image_post['body'] }}</p>
</article>
{% if not loop.last %}
<hr>
{% endif %}
{% endfor %}
{% endblock %}
